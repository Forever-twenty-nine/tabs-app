<!-- Button float -->
<ion-button
  slot="start"
  fill="clear"
  class="fixed top-4 left-2 z-10 text-white"
  (click)="goToLogin()">
  <ion-icon name="arrow-back-outline"></ion-icon>
</ion-button>

<ion-content [fullscreen]="true" class="ion-padding" style="--background: url('/assets/images/bg.jpg') no-repeat center center / cover;">

  <!-- bg gradient & blur -->
  <div class="fixed inset-0 z-0">
    <div class="w-full h-full bg-[url('/assets/images/bg.jpg')] bg-cover bg-center blur-xs"></div>
    <div class="absolute inset-0 bg-gradient-to-b from-transparent via-black/70 to-black pointer-events-none"></div>
  </div>

  <!-- content -->
  <div class="z-10 p-2 relative flex items-start justify-center">

    <div class="mt-24 w-full">
      <h1 class="text-white font-semibold font-heading text-4xl mb-8">
        Recuperar Contraseña
      </h1>
      <p class="mb-6 text-white/80">
        Ingresa tu email y te enviaremos un enlace para restablecer tu contraseña.
      </p>

      <form>
        <!-- email -->
        <ion-item
          class="mb-4"
          [class.item-valid]="isEmailValid()"
          [class.item-invalid]="isEmailInvalid()">
          <ion-icon
            name="mail-outline"
            slot="start"
            size="default"
            aria-hidden="true"
            class="mr-2">
          </ion-icon>
          <ion-input
            type="email"
            [(ngModel)]="email"
            name="email"
            placeholder="Ingresa tu email"
            (ionInput)="validateEmail()"
            [clearInput]="true">
          </ion-input>
        </ion-item>
        
        <!-- Error message -->
        <div *ngIf="emailError" class="mb-4">
          <p class="text-red-400 text-sm">{{ emailError }}</p>
        </div>

        <!-- Success message -->
        <div *ngIf="successMessage" class="mb-4">
          <p class="text-green-400 text-sm">{{ successMessage }}</p>
        </div>
      </form>

      <ion-button
        expand="block"
        fill="solid"
        size="large"
        shape="round"
        color="primary"
        (click)="resetPassword()"
        [disabled]="!isEmailValid() || isLoading"
        class="mb-4">
        <ion-spinner *ngIf="isLoading" name="crescent" class="mr-2"></ion-spinner>
        {{ isLoading ? 'Enviando...' : 'Enviar Enlace' }}
      </ion-button>

      <div class="text-center">
        <p class="text-white/80 text-sm">
          ¿Recordaste tu contraseña? 
          <span class="text-blue-400 cursor-pointer underline" (click)="goToLogin()">
            Inicia sesión aquí
          </span>
        </p>
      </div>
    </div>
  </div>

</ion-content>
